package android;

import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.remote.DesiredCapabilities;

import io.appium.java_client.MobileBy;
import io.appium.java_client.MobileElement;
import io.appium.java_client.TouchAction;
import io.appium.java_client.android.AndroidDriver;
import io.appium.java_client.android.AndroidElement;
import io.appium.java_client.remote.MobileCapabilityType;
import io.appium.java_client.touch.WaitOptions;
import io.appium.java_client.touch.offset.PointOption;

public class App {
	WebDriver Driver;
	public static void main(String[] args) throws MalformedURLException, InterruptedException {

		File f = new File("src");
		File fs = new File(f,"ApiDemos 17_v' platformBuildVersionName=_apkpure.com.apk");   
		DesiredCapabilities cap = new DesiredCapabilities();
		cap.setCapability(MobileCapabilityType.PLATFORM_NAME,"Android");
		cap.setCapability(MobileCapabilityType.DEVICE_NAME, "Pixel9" );
		cap.setCapability(MobileCapabilityType.AUTOMATION_NAME,"uiAutomator2");
		cap.setCapability(MobileCapabilityType.APP,fs.getAbsolutePath());
		AndroidDriver driver =new AndroidDriver(new URL ("http://127.0.0.1:4723/wd/hub"),cap);

       // driver.findElement(By.id("com.android.permissioncontroller:id/continue_button")).click();


		Thread.sleep(6000);
				driver.findElement(By.xpath("//android.widget.Button[@index='1']")).click();
				
				driver.findElement(By.xpath("//android.widget.TextView[@index='10']")).click();
				AndroidElement list = (AndroidElement) driver.findElement(By.id("android:id/text1"));
				Dimension dimension =driver.manage().window().getSize();
				int start_x =(int) (dimension.width * 0.5);
				int start_y =(int) (dimension.height * 0.8);
				int end_x =(int) (dimension.width*.02);
				int end_y =(int) (dimension.height*0.2);
				
				
						TouchAction touch = new TouchAction(driver);
						touch.press(PointOption.point(3,4))
						.waitAction(WaitOptions.waitOptions(Duration.ofSeconds(1)))
						.moveTo(PointOption.point(end_x,end_y)).release().perfom();
		       // driver.findElement(By.xpath("//android.widget.TextView[@index='13']")).click();
				//driver.findElement(By.xpath("//android.widget.TextView[@index='1']")).click();
				//driver.findElement(By.id("com.github.axet.android.apis:id/edit")).sendKeys("appwrk");
				//driver.findElement(By.id("com.github.axet.android.apis:id/check1")).click();
				//driver.findElement(By.id("com.github.axet.android.apis:id/radio1")).click();
				}

	}


